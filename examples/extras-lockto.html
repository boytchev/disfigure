<!DOCTYPE html>

<html>

<body>
	<header>
		<h1><b>Disfigure</b></h1>
		<h3>Locking a body part to specific point in space</h3></br>
	</header>

	<div id="spinner"></div>

	<script src="importmap.js"></script>
	<script type="module">

		import * as Happy from 'disfigure';


		// create a default world

		new Happy.World();
		Happy.camera.position.y = 1;
		Happy.camera.position.z = 5;


		// create a man

		var manA = new Happy.Man( );
		manA.flip = 0;
		
		var manB = new Happy.Man( );
		manB.flip = 1;
		

		// animate the scene
		
		function animate( event ) {

			var man = event.target;
		
			var t = event.time/4000 + man.flip;
		
			// animating the man

			man.torso.turn = 180*man.flip;

			man.head.bend = Happy.chaotic( t, 0, -30, 50 );
			man.head.turn = Happy.chaotic( t, 4, -60, 60 );
			man.head.tilt = Happy.chaotic( t, 2, -50, 50 );

			man.chest.bend = Happy.chaotic( t, 1, -20, 40 );
			man.chest.turn = Happy.chaotic( t, 6, -60, 60 );
			man.chest.tilt = Happy.chaotic( t, 6, -30, 30 );

			man.waist.bend = Happy.chaotic( t, 3, -20, 40 );
			man.waist.turn = Happy.chaotic( t, 5, -60, 60 );
			man.waist.tilt = Happy.chaotic( t, 6, -30, 30 );

			man.l_elbow.bend = Happy.chaotic( t, 9, 20, 60 );
			man.r_elbow.bend = Happy.chaotic( t, 7, 0, 140 );

			man.l_wrist.bend = Happy.chaotic( t, -2, -20, 20 );
			man.l_wrist.turn = Happy.chaotic( t, -3, -25, 25 );
			man.l_wrist.tilt = Happy.chaotic( t, -2, -20, 20 );

			man.r_wrist.bend = Happy.chaotic( t, -1, -60, 60 );
			man.r_wrist.turn = Happy.chaotic( t, -4, -45, 45 );
			man.r_wrist.tilt = Happy.chaotic( t, -1, -40, 40 );

			man.l_arm.straddle = Happy.chaotic( t, 5, -20, 20 );
			man.l_arm.turn = Happy.chaotic( t, 6, -30, 30 );
			man.l_arm.forward = Happy.chaotic( t, 7, -20, 20 );

			man.r_arm.straddle = Happy.chaotic( t, -5, -50, 40 );
			man.r_arm.turn = Happy.chaotic( t, -6, -20, 20 );
			man.r_arm.forward = Happy.chaotic( t, -7, -20, 80 );

			man.l_knee.bend = Happy.chaotic( t, 6, 0, 140 );
			man.r_knee.bend = Happy.chaotic( t, 0, 0, 140 );

			man.l_foot.bend = Happy.chaotic( t, 7, -40, 40 );
			man.r_foot.bend = Happy.chaotic( t, 5, -40, 40 );

			man.l_ankle.bend = Happy.chaotic( t, -31, -40, 70 );
			man.l_ankle.turn = Happy.chaotic( t, 22, 0, 70 );
			man.l_ankle.tilt = Happy.chaotic( t, -2, -40, 40 );

			man.r_ankle.bend = Happy.chaotic( t, 1, -40, 70 );
			man.r_ankle.turn = Happy.chaotic( t, -11, 0, 70 );
			man.r_ankle.tilt = Happy.chaotic( t, -13, -40, 40 );

			man.l_leg.straddle = Happy.chaotic( t, -8, 20, 40 );
			man.l_leg.forward = Happy.chaotic( t, -2, -40, 80 );
			man.l_thigh.turn = Happy.chaotic( t, 8, -40, 80 );

			man.r_leg.straddle = Happy.chaotic( t, -3, 20, 40 );
			man.r_leg.forward = Happy.chaotic( t, 4, -40, 80 );
			man.r_thigh.turn = Happy.chaotic( t, -1, -40, 80 );

			// the middle finger touches (0,1.5,0)
			man.l_wrist.lockTo( 0.195, -0.01, 0.008, 0, 1.5, 0 );
		
		}
		
		manA.addEventListener( 'animate', animate );
		manB.addEventListener( 'animate', animate );
		
	</script>
</body>
</html>