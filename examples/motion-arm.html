<!DOCTYPE html>

<html>

<body>
	<header>
		<h1><b>Disfigure</b></h1>
		<h3>Individual motions for the arms</h3></br>
	</header>

	<div id="spinner"></div>

	<script src="importmap.js"></script>
	<script type="module">

		import * as Happy from 'disfigure';
		import * as Red from 'label';


		// create a default world

		new Happy.World( );


		// create three persons next to each other
		
		var man = new Happy.Man(),
			woman = new Happy.Woman(),
			child = new Happy.Child();

		man.position.x = -1;
		woman.position.x = 1;


		// add labels indicating their motion style
		
		man.l_arm.attach( new Red.Label( 'turn', 0.8, 0.15, 0.16, 0 ) );
		man.r_arm.attach( new Red.Label( 'turn', 0.8, -0.15, 0.16, 0 ) );
		
		woman.l_arm.attach( new Red.Label( 'foreward', 0.8, 0.22, 0.14, 0 ) );
		woman.r_arm.attach( new Red.Label( 'foreward', 0.8, -0.22, 0.14, 0 ) );
		
		child.l_arm.attach( new Red.Label( 'straddle', 0.8, 0.23, 0.10, 0 ) );
		child.r_arm.attach( new Red.Label( 'straddle', 0.8, -0.23, 0.10, 0 ) );


		// animate the men
		
		Happy.setAnimationLoop( ( t )=>{

			t = t/2000;

			// motions of arms
			
			man.l_arm.turn = Happy.chaotic( t, 0, -60, 60 );
			man.r_arm.turn = Happy.chaotic( t, 1, -60, 60 );

			woman.l_arm.foreward = Happy.chaotic( t, 2, -40, 80 );
			woman.r_arm.foreward = Happy.chaotic( t, 3, -40, 80 );

			child.l_arm.straddle = Happy.chaotic( t, 4, -40, 80 );
			child.r_arm.straddle = Happy.chaotic( t, 5, -40, 80 );

			// some general motion of the bodies
			
			man.waist.turn = Happy.chaotic( t/4, 6, 0, 30 );
			woman.waist.turn = Happy.chaotic( t/4, 7, -10, 10 );
			child.waist.turn = Happy.chaotic( t/4, 8, -30, 10 );

			man.head.turn = man.waist.turn;
			woman.head.turn = woman.waist.turn;
			child.head.turn = child.waist.turn;

		} );

	</script>
</body>
</html>