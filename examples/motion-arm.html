<!DOCTYPE html>

<html>

<body>
	<header>
		<h1><b>Disfigure</b></h1>
		<h3>Individual motions for the arms</h3></br>
	</header>

	<div id="spinner"></div>

	<script src="importmap.js"></script>
	<script type="module">

		import * as Happy from 'disfigure';
		import * as Red from 'label';


		// create a default world

		new Happy.World( );


		// create three men next to each other
		
		var man1 = new Happy.Man( ),
			man2 = new Happy.Man( ),
			man3 = new Happy.Man( );

		man1.position.x = -1;
		man3.position.x = 1;


		// add labels indicating their motion style
		
		man1.l_arm.attach( new Red.Label( 'turn', 1, 0.15, 0.18, 0 ) );
		man2.l_arm.attach( new Red.Label( 'foreward', 1, 0.15, 0.18, 0 ) );
		man3.l_arm.attach( new Red.Label( 'straddle', 1, 0.18, 0.18, 0 ) );


		// animate the men
		
		Happy.setAnimationLoop( ( t )=>{

			t = t/1000;

			// motions of arms
			
			man1.l_arm.turn = Happy.chaotic( t, 0, -60, 60 );
			man1.r_arm.turn = Happy.chaotic( t, 1, -60, 60 );

			man2.l_arm.foreward = Happy.chaotic( t, 2, -20, 80 );
			man2.r_arm.foreward = Happy.chaotic( t, 3, -20, 80 );

			man3.l_arm.straddle = Happy.chaotic( t, 4, -20, 60 );
			man3.r_arm.straddle = Happy.chaotic( t, 5, -20, 60 );

			// some general motion of the bodies
			
			man1.waist.turn = Happy.chaotic( t/4, 6, 0, 30 );
			man2.waist.turn = Happy.chaotic( t/4, 7, -10, 10 );
			man3.waist.turn = Happy.chaotic( t/4, 8, -30, 10 );

			man1.head.turn = man1.waist.turn;
			man2.head.turn = man2.waist.turn;
			man3.head.turn = man3.waist.turn;

		} );

	</script>
</body>
</html>