<!DOCTYPE html>

<html>

<body>
	<header>
		<h1><b>Disfigure</b></h1>
		<h3>Setting and getting a posture</h3></br>
	</header>

	<div id="spinner"></div>

	<script src="importmap.js"></script>
	<script type="module">

		import * as Three from 'three';
		import * as Happy from 'disfigure';


		// create a default world

		new Happy.World( );
		Happy.controls.autoRotate = true;
		Happy.controls.target.y = 0.7;


		// create a man with a posture
		
		var man = new Happy.Man( );

		man.posture = {"version":8,"position":[0,-0.29,0.5],"rotation":[0,0,0,"XYZ"],"angles":[8,0,0,-4,4,-6,3,-34,0,-5,-60,-8,-7,-1,25,0,0,0,52,0,0,0,-4,0,-32,0,-23,-23,0,0,49,26,40,0,45,0,88,0,0,0,6,0,-16,0,5,0,0,0,0,7,7,0,140,0,0,0,0,0,0,-25,5,-20,12,0,50,0,50,0,0,0,-5,-17]};

		// man's stick

		var geometry = new Three.CylinderGeometry( 0.01, 0.01, 1.8 ),
			material = new Three.MeshStandardMaterial( { color: 'crimson' } ),
			stick = new Three.Mesh( geometry, material );

		stick.rotation.x = Math.PI/2;
		stick.position.set( -0.1, -0.02, 0 );
		stick.castShadow = true;

		man.r_wrist.attach( stick );
		

		// create a child with the man's posture
		
		var child = new Happy.Child( );
		
		child.posture = man.posture;
		child.position.z = -0.5;
		child.position.y = -0.22;
		child.rotation.y = Math.PI;

		// child's stick
		
		stick = stick.clone();
		stick.position.set( -0.05, -0.028, 0 );

		child.r_wrist.attach( stick );

	</script>
</body>
</html>