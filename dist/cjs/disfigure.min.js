/*! disfigure v0.0.7 */
"use strict";var e=require("three"),t=require("three/tsl"),a=require("three/addons/libs/lil-gui.module.min.js"),o=require("three/addons/controls/OrbitControls.js");function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var n=s(e),i=s(a);const r=t.Fn((([e])=>{var a=e.cos().toVar(),o=e.sin().toVar();return t.mat3(1,0,0,0,a,o,0,o.negate(),a)})).setLayout({name:"matRotX",type:"mat3",inputs:[{name:"angle",type:"float"}]}),u=t.Fn((([e])=>{var a=e.cos().toVar(),o=e.sin().toVar();return t.mat3(a,0,o.negate(),0,1,0,o,0,a)})).setLayout({name:"matRotY",type:"mat3",inputs:[{name:"angle",type:"float"}]}),l=t.Fn((([e])=>{var a=e.cos().toVar(),o=e.sin().toVar();return t.mat3(a,o,0,o.negate(),a,0,0,0,1)})).setLayout({name:"matRotZ",type:"mat3",inputs:[{name:"angle",type:"float"}]}),m=t.Fn((([e])=>{var t=r(e.x),a=u(e.y),o=l(e.z);return a.mul(t).mul(o)})).setLayout({name:"matRotYXZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),d=t.Fn((([e])=>{var t=r(e.x),a=u(e.y),o=l(e.z);return a.mul(o).mul(t)})).setLayout({name:"matRotYZX",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),p=t.Fn((([e])=>{var t=r(e.x),a=u(e.y),o=l(e.z);return t.mul(a).mul(o)})).setLayout({name:"matRotXYZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),h=t.Fn((([e])=>{var t=r(e.x),a=u(e.y),o=l(e.z);return t.mul(o).mul(a)})).setLayout({name:"matRotXZY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),f=t.Fn((([e])=>{var t=r(e.x),a=u(e.y);return l(e.z).mul(t).mul(a)})).setLayout({name:"matRotZXY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),v=t.Fn((([e])=>{var t=r(e.x),a=u(e.y);return l(e.z).mul(a).mul(t)})).setLayout({name:"matRotZYX",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});var c=new n.Scene;c.background=new n.Color("whitesmoke");var g=new n.PerspectiveCamera(30,innerWidth/innerHeight);g.position.set(-2,1,3.5),g.lookAt(c.position);var y=new n.WebGPURenderer({antialias:!0});y.outputColorSpace=n.LinearSRGBColorSpace,y.setSize(innerWidth,innerHeight),document.body.appendChild(y.domElement),window.addEventListener("resize",(()=>{g.aspect=innerWidth/innerHeight,g.updateProjectionMatrix(),y.setSize(innerWidth,innerHeight)}));var z=new o.OrbitControls(g,y.domElement);z.enableDamping=!0,z.dampingFactor=.05;var L=new n.AmbientLight("white",1);c.add(L);var x=new n.DirectionalLight("white",2);x.position.set(0,0,1),c.add(x);var R,w=new n.AxesHelper,b={animate:!1},k={isolated:!1,randomize:function(e=n.MathUtils.randInt(Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)){function t(e=-1,t=1){return n.MathUtils.seededRandom()*(t-e)+e}n.MathUtils.seededRandom(e),P.rotation.y+=t()-.2,M.waist.value.set(t()/4-.2,t()/2,t()/2.5),M.chest.value.set(t()/3,0,t()/3),M.head.value.set(t()/2,t()/2,t()/3),M.kneeLeft.value.set(-(t()+1)/1.5,0,0),M.kneeRight.value.set(-(t()+1)/1.5,0,0),M.footLeft.value.set(.5*t()+.15,0,0),M.footRight.value.set(.5*t()+.15,0,0),M.ankleLeft.value.set(t()/2,0,t()/4),M.ankleRight.value.set(t()/2,0,t()/4),M.legLeft.value.set(0,t()-.25,0),M.legRight.value.set(0,t()+.25,0),M.hipLeft.value.set(t()/1+.25,0,-(t()+1)/4),M.hip2Left.value.set(0,t(),0),M.hipRight.value.set(t()/1+.25,0,(t()+1)/4),M.hip2Right.value.set(0,t(),0),M.elbowLeft.value.set(0,t()+1,0),M.elbowRight.value.set(0,-(t()+1),0),M.forearmLeft.value.set(.5*(1.5*t()+1),0,0),M.forearmRight.value.set(.5*(1.5*t()+1),0,0),M.wristLeft.value.set(0,.5*t()+.1,.7*t()),M.wristRight.value.set(0,.5*t()+.1,-.7*t()),M.armLeft.value.set(.7*(t()/1.5-.15),0,.7*t()),M.armRight.value.set(.7*(t()/1.5-.15),0,.7*t()),N()}},M={},F={},P=new n.Group;function G(e){switch(P.add(w),e){case 1:w.position.copy(F.head.pivot);break;case 2:w.position.copy(F.chest.pivot);break;case 3:w.position.copy(F.waist.pivot);break;case 11:w.position.copy(F.hipLeftPos);break;case 15:w.position.copy(F.hip2.pivot);break;case 12:w.position.copy(F.leg.pivot);break;case 13:w.position.copy(F.knee.pivot);break;case 14:w.position.copy(F.ankle.pivot);break;case 16:w.position.copy(F.foot.pivot);break;case 21:w.position.copy(F.armLeftPos);break;case 22:w.position.copy(F.elbowLeftPos);break;case 23:w.position.copy(F.forearm.pivot);break;case 24:w.position.copy(F.wristLeftPos);break;default:P.remove(w)}}function N(){for(var e of R.controllersRecursive())e.updateDisplay()}y.setAnimationLoop((function(e){var t;b.animate&&(t=e/1e3,M.waist.value.set(Math.sin(t)/4-.2,Math.cos(1.2*t)/2,Math.sin(3*t)/2.5),M.chest.value.set(Math.cos(3*t)/3,0,Math.cos(3*t*1.5)/3),M.head.value.set(Math.cos(3*t)/2,Math.sin(1.2*t*2)/2,Math.cos(3*t*1.5)/3),M.kneeLeft.value.set(-(Math.cos(3*t)+1)/1.5,0,0),M.kneeRight.value.set(-(Math.sin(2.4*t)+1)/1.5,0,0),M.footLeft.value.set(.5*Math.cos(1.7*t)+.15,0,0),M.footRight.value.set(.5*Math.sin(1.9*t)+.15,0,0),M.ankleLeft.value.set(Math.cos(3*t)/2,0*Math.cos(2.8*t)/2,Math.cos(2.2*t)/4),M.ankleRight.value.set(Math.sin(3.2*t)/2,0*Math.cos(2.3*t)/2,Math.sin(2.1*t)/4),M.legLeft.value.set(0,Math.cos(2.8*t)-.25,0),M.legRight.value.set(0,Math.cos(2.3*t)+.25,0),M.hipLeft.value.set(Math.cos(3*t)/1+.25,0,-(Math.cos(2.2*t)+1)/4),M.hip2Left.value.set(0,Math.cos(2.8*t),0),M.hipRight.value.set(Math.sin(2.2*t)/1+.25,0,(Math.sin(2.6*t)+1)/4),M.hip2Right.value.set(0,Math.sin(3.2*t),0),M.elbowLeft.value.set(0,Math.cos(2*t-1)+1,0),M.elbowRight.value.set(0,-(Math.sin(1.8*t)+1),0),M.forearmLeft.value.set(.5*(1.5*Math.cos(3.6*t-1)+1),0,0),M.forearmRight.value.set(.5*(1.5*Math.sin(1.8*t*3+1)+1),0,0),M.wristLeft.value.set(0,.5*Math.cos(3.6*t-1)+.1,.7*Math.cos(2.6*t+1)),M.wristRight.value.set(0,.5*Math.cos(3.6*t-1)+.1,-.7*Math.cos(2.6*t+1)),M.armLeft.value.set(.7*(Math.cos(3*t)/1.5-.15),0,.7*Math.cos(2.2*t)),M.armRight.value.set(.7*(Math.sin(2.4*t)/1.5-.15),0,.7*Math.sin(2.7*t)),N()),z.update(),x.position.copy(g.position),y.render(c,g)}));class I{constructor(t,a,o,s,n){this.pivot=new e.Vector3(t,a,o),this.mirrorPivot=new e.Vector3(-t,a,o),this.min=s,this.max=n}}function E({hipLeftSpan:e}){var a=t.positionGeometry.x,o=t.positionGeometry.y;return o.sub(a.mul(2)).smoothstep(e.z,t.float(e.w).sub(a.mul(1.6))).mul(o.smoothstep(e.x,e.y)).mul(a.smoothstep(-.01,.01))}function B({hipRightSpan:e}){var a=t.positionGeometry.x,o=t.positionGeometry.y;return o.add(a.mul(2)).smoothstep(e.z,t.float(e.w).add(a.mul(1.6))).mul(o.smoothstep(e.x,e.y)).mul(a.smoothstep(.01,-.01))}function V({armLeftSpan:e}){var a=t.positionGeometry.x,o=t.positionGeometry.y;return a.smoothstep(e.x,e.y).mul(o.smoothstep(e.z,e.w))}function T({armRightSpan:e}){var a=t.positionGeometry.x,o=t.positionGeometry.y;return a.smoothstep(e.x,e.y).mul(o.smoothstep(e.z,e.w))}var q=t.Fn((([e,t,a,o])=>e.sub(t).mul(m(a.mul(o))).add(t))).setLayout({name:"jointRotate",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),A=t.Fn((([e,t,a])=>e.mul(m(t.mul(a))))).setLayout({name:"jointRotateNormal",type:"vec3",inputs:[{name:"nor",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),j=t.Fn((([e,t,a,o])=>e.sub(t).mul(d(a.mul(o))).add(t))).setLayout({name:"jointRotateLeg",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),X=t.Fn((([e,t,a])=>e.mul(d(t.mul(a))))).setLayout({name:"jointRotateNormalLeg",type:"vec3",inputs:[{name:"nor",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),Y=t.Fn((([e,a,o,s])=>t.mix(e,e.sub(a).mul(h(o.mul(s))).mul(t.float(1).sub(s.mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).div(4).mul(o.z.cos().oneMinus()))).add(a),s.pow(.25)))).setLayout({name:"jointRotate2",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),S=t.Fn((([e,a,o])=>t.mix(e,e.mul(h(a.mul(o))).mul(t.float(1).sub(o.mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).div(4).mul(a.z.cos().oneMinus()))),o.pow(.25)))).setLayout({name:"jointRotateNormal2",type:"vec3",inputs:[{name:"nor",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),Z=t.Fn((({skeleton:e,posture:a})=>{var o=t.positionGeometry.toVar(),s=V(e).toVar();t.If(s.greaterThan(0),(()=>{o.assign(q(o,e.wrist.pivot,a.wristLeft,e.wrist.fuzzy())),o.assign(q(o,e.forearm.pivot,a.forearmLeft,e.forearm.fuzzy())),o.assign(q(o,e.elbow.pivot,a.elbowLeft,e.elbow.fuzzy())),o.assign(Y(o,e.armLeftPos,a.armLeft,s))}));var n=T(e).toVar();t.If(n.greaterThan(0),(()=>{o.assign(q(o,e.wrist.mirrorPivot,a.wristRight,e.wrist.mirrorFuzzy())),o.assign(q(o,e.forearm.mirrorPivot,a.forearmRight,e.forearm.mirrorFuzzy())),o.assign(q(o,e.elbow.mirrorPivot,a.elbowRight,e.elbow.mirrorFuzzy())),o.assign(Y(o,e.armRightPos,a.armRight,n))})),o.assign(q(o,e.head.pivot,a.head,e.head.fuzzy())),o.assign(q(o,e.chest.pivot,a.chest,e.chest.fuzzy())),o.assign(q(o,e.waist.pivot,a.waist,e.waist.fuzzy()));var i=E(e).toVar();t.If(i.greaterThan(0),(()=>{o.assign(q(o,e.foot.pivot,a.footLeft,e.foot.fuzzy())),o.assign(q(o,e.ankle.pivot,a.ankleLeft,e.ankle.fuzzy())),o.assign(q(o,e.leg.pivot,a.legLeft,e.leg.fuzzy())),o.assign(q(o,e.knee.pivot,a.kneeLeft,e.knee.fuzzy())),o.assign(j(o,e.hip2.pivot,a.hip2Left,e.hip2.fuzzy())),o.assign(j(o,e.hipLeftPos,a.hipLeft,i))}));var r=B(e).toVar();return t.If(r.greaterThan(0),(()=>{o.assign(q(o,e.foot.mirrorPivot,a.footRight,e.ankle.fuzzy())),o.assign(q(o,e.ankle.mirrorPivot,a.ankleRight,e.ankle.fuzzy())),o.assign(q(o,e.leg.mirrorPivot,a.legRight,e.leg.fuzzy())),o.assign(q(o,e.knee.mirrorPivot,a.kneeRight,e.knee.fuzzy())),o.assign(j(o,e.hip2.mirrorPivot,a.hip2Right,e.hip2.fuzzy())),o.assign(j(o,e.hipRightPos,a.hipRight,r))})),o})),C=t.Fn((({skeleton:e,posture:a})=>{var o=t.normalGeometry.toVar(),s=V(e).toVar();t.If(s.greaterThan(0),(()=>{o.assign(A(o,a.wristLeft,e.wrist.fuzzy())),o.assign(A(o,a.forearmLeft,e.forearm.fuzzy())),o.assign(A(o,a.elbowLeft,e.elbow.fuzzy())),o.assign(S(o,a.armLeft,s))}));var n=T(e).toVar();t.If(n.greaterThan(0),(()=>{o.assign(A(o,a.wristRight,e.wrist.mirrorFuzzy())),o.assign(A(o,a.forearmRight,e.forearm.mirrorFuzzy())),o.assign(A(o,a.elbowRight,e.elbow.mirrorFuzzy())),o.assign(S(o,a.armRight,n))})),o.assign(A(o,a.head,e.head.fuzzy())),o.assign(A(o,a.chest,e.chest.fuzzy())),o.assign(A(o,a.waist,e.waist.fuzzy()));var i=E(e).toVar();t.If(i.greaterThan(0),(()=>{o.assign(A(o,a.footLeft,e.foot.fuzzy())),o.assign(A(o,a.ankleLeft,e.ankle.fuzzy())),o.assign(A(o,a.legLeft,e.leg.fuzzy())),o.assign(A(o,a.kneeLeft,e.knee.fuzzy())),o.assign(X(o,a.hip2Left,e.hip2.fuzzy())),o.assign(X(o,a.hipLeft,i))}));var r=B(e).toVar();return t.If(r.greaterThan(0),(()=>{o.assign(A(o,a.footRight,e.foot.fuzzy())),o.assign(A(o,a.ankleRight,e.ankle.fuzzy())),o.assign(A(o,a.legRight,e.leg.fuzzy())),o.assign(A(o,a.kneeRight,e.knee.fuzzy())),o.assign(X(o,a.hip2Right,e.hip2.fuzzy())),o.assign(X(o,a.hipRight,r))})),t.transformNormalToView(o).normalize()})),H=t.Fn((({skeleton:e,posture:a})=>{var o=a.select,s=t.float(0).add(e.head.fuzzy().mul(t.select(o.equal(1),1,0))).add(e.chest.fuzzy().mul(t.select(o.equal(2),1,0))).add(e.waist.fuzzy().mul(t.select(o.equal(3),1,0))).add(E(e).mul(t.select(o.equal(11),1,0))).add(e.leg.fuzzy().mul(t.select(o.equal(12),1,0))).add(e.knee.fuzzy().mul(t.select(o.equal(13),1,0))).add(e.ankle.fuzzy().mul(t.select(o.equal(14),1,0))).add(e.foot.fuzzy().mul(t.select(o.equal(16),1,0))).add(e.hip2.fuzzy().mul(t.select(o.equal(15),1,0))).add(V(e).mul(t.select(o.equal(21),1,0))).add(e.elbow.fuzzy().mul(t.select(o.equal(22),1,0))).add(e.forearm.fuzzy().mul(t.select(o.equal(23),1,0))).add(e.wrist.fuzzy().mul(t.select(o.equal(24),1,0))).toVar();return s.assign(t.select(a.isolated,s.smoothstep(0,1).mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).pow(1/4).mul(1.1).negate(),s.clamp(0,1).pow(.75).negate())),t.vec3(0,s.div(2),s.div(1))})),O=t.Fn((()=>{var e=t.positionGeometry,a=t.float(0).add(e.x.mul(72).cos().smoothstep(.9,1)).add(e.y.mul(74).cos().smoothstep(.9,1)).add(e.z.mul(74).add(e.y.mul(4.5).add(.5).cos().mul(1).add(2.5)).abs().smoothstep(.6,0)).smoothstep(.6,1).oneMinus().pow(.1);return t.vec3(a)}));exports.LocusX=class extends I{fuzzy(){return t.positionGeometry.x.smoothstep(this.min,this.max)}mirrorFuzzy(){return t.positionGeometry.x.smoothstep(-this.min,-this.max)}},exports.LocusY=class extends I{fuzzy(){return t.positionGeometry.y.smoothstep(this.min,this.max)}},exports.LocusYZ=class extends I{constructor(e,t,a,o,s,n){super(e,t,a,o,s),this.slope=Math.tan((90-n)*Math.PI/180)}fuzzy(){return t.positionGeometry.y.add(t.positionGeometry.z.div(this.slope)).smoothstep(this.min,this.max)}},exports.createGui=function(e,a,o){F=e,(M=a).select=t.uniform(0,"int"),M.isolated=t.uniform(0,"int"),P=o,(R=new i.GUI).domElement.style.marginRight=0;var s=R.addFolder("DEBUG");function n(e,t,a=""){return`<div class="padded ${a}">${e} &nbsp; <span class="icon">${t}</span></div>`}return s.close(),s.add(M.select,"value",{Nothing:0,Head:1,Chest:2,Waist:3,Hip:11,Hip2:15,Leg:12,Knee:13,Ankle:14,Foot:16,Arm:21,Elbow:22,Forearm:23,Wrist:24}).name("Show").onChange(G),s.add(k,"isolated",!1).name("Isolated").onChange((()=>{M.isolated.value=k.isolated?1:0})),s.add(b,"animate",!1).name("Animate"),s.add(k,"randomize").name("Randomize"),(s=R.addFolder("TORSO")).add(M.head.value,"x",-.7,.5).name(n("Head","&#x2195;")),s.add(M.head.value,"z",-.5,.5).name(n("","&#x21B6;")),s.add(M.head.value,"y",-1,1).name(n("","&#x2194;")),s.add(M.chest.value,"x",-.7,.4).name(n("Chest","&#x2195;","border")),s.add(M.chest.value,"z",-.5,.5).name(n("","&#x21B6;")),s.add(M.waist.value,"x",-1,.6).name(n("Waist","&#x2195;","border")),s.add(M.waist.value,"z",-.5,.5).name(n("","&#x21B6;")),s.add(M.waist.value,"y",-1,1).name(n("","&#x2194;")),(s=R.addFolder("LEFT LEG").close()).add(M.hipLeft.value,"x",-.6,2.7).name(n("Leg","&#x2195;")),s.add(M.hipLeft.value,"z",-2.4,.2).name(n("","&#x21BA;")),s.add(M.hip2Left.value,"y",-1.4,1.4).name(n("","&#x2194;")),s.add(M.kneeLeft.value,"x",-2.6,0).name(n("Knee","&#x2195;","border")),s.add(M.ankleLeft.value,"x",-1,.7).name(n("Ankle","&#x2195;","border")),s.add(M.legLeft.value,"y",-3,3).name(n("","&#x2194;")),s.add(M.ankleLeft.value,"z",-.5,.5).name(n("","&#x21BA;")),s.add(M.footLeft.value,"x",-.3,.6).name(n("Foot","&#x2195;","border")),(s=R.addFolder("RIGHT LEG").close()).add(M.hipRight.value,"x",-.6,2.7).name(n("Leg","&#x2195;")),s.add(M.hipRight.value,"z",-.2,2.4).name(n("","&#x21BB;")),s.add(M.hip2Right.value,"y",-1.4,1.4).name(n("","&#x2194;")),s.add(M.kneeRight.value,"x",-2.6,0).name(n("Knee","&#x2195;","border")),s.add(M.ankleRight.value,"x",-1,.7).name(n("Ankle","&#x2195;","border")),s.add(M.legRight.value,"y",-3,3).name(n("","&#x2194;")),s.add(M.ankleRight.value,"z",-.5,.5).name(n("","&#x21BB;")),s.add(M.footRight.value,"x",-.3,.6).name(n("Foot","&#x2195;","border")),(s=R.addFolder("LEFT ARM").close()).add(M.armLeft.value,"z",-1.5,1.7).name(n("Arm","&#x2195;")),s.add(M.armLeft.value,"y",-.5,2).name(n("","&#x2194;")),s.add(M.armLeft.value,"x",-.5,.5).name(n("","&#x21BB;")),s.add(M.elbowLeft.value,"y",0,2.7).name(n("Elbow","&#x2195;","border")),s.add(M.wristLeft.value,"z",-1.4,1.4).name(n("Wrist","&#x2195;","border")),s.add(M.wristLeft.value,"y",-.6,.4).name(n("","&#x2194;")),s.add(M.forearmLeft.value,"x",-1.5,3).name(n("","&#x21BB;")),(s=R.addFolder("RIGHT ARM").close()).add(M.armRight.value,"z",-1.5,1.7).name(n("Arm","&#x2195;")),s.add(M.armRight.value,"y",-2,.5).name(n("","&#x2194;")),s.add(M.armRight.value,"x",-.5,.5).name(n("","&#x21BB;")),s.add(M.elbowRight.value,"y",-2.7,0).name(n("Elbow","&#x2195;","border")),s.add(M.wristRight.value,"z",-1.4,1.4).name(n("Wrist","&#x2195;","border")),s.add(M.wristRight.value,"y",-.4,.6).name(n("","&#x2194;")),s.add(M.forearmRight.value,"x",-1.5,3).name(n("","&#x21BB;")),R},exports.credits=function(e,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById(t).innerHTML=this.responseText.split("||")[0])},(e=e.split(".")).pop(),e.push("txt"),e=e.join("."),a.open("GET",e,!0),a.send()},exports.matRotXYZ=p,exports.matRotXZY=h,exports.matRotYXZ=m,exports.matRotYZX=d,exports.matRotZXY=f,exports.matRotZYX=v,exports.processModel=function(t,a,o,s){return function(t){var a=[];t.traverse((t=>{if(t.isMesh){var o=t.geometry.clone().applyMatrix4(t.matrixWorld),s=t.material.clone();a.push(new e.Mesh(o,s))}})),t.clear(),t.position.set(0,0,0),t.rotation.set(0,0,0,"XYZ"),t.scale.set(1,1,1),t.add(...a)}(t),function(t,a,o,s){t.traverse((t=>{if(t.isMesh){var n=new e.MeshPhysicalNodeMaterial;Object.assign(n,t.material),n.metalness=.1,n.roughness=.6,n.metalness=.7,n.roughness=.1,s.colorNode&&(n.colorNode=s.colorNode()),s.positionNode&&(n.positionNode=s.positionNode({skeleton:a,posture:o})),s.normalNode&&(n.normalNode=s.normalNode({skeleton:a,posture:o})),s.emissiveNode&&(n.emissiveNode=s.emissiveNode({skeleton:a,posture:o})),t.material=n}}))}(t,a,o,s),function(t){var a=new e.Vector3;(new e.Box3).setFromObject(t,!0).getCenter(a),t.position.sub(a)}(t),t},exports.scene=c,exports.tslColorNode=O,exports.tslEmissiveNode=H,exports.tslNormalNode=C,exports.tslPositionNode=Z,exports.tslPosture=function(){return{head:t.uniform(t.vec3(0,0,0)),chest:t.uniform(t.vec3(0,0,0)),waist:t.uniform(t.vec3(0,0,0)),kneeLeft:t.uniform(t.vec3(0,0,0)),kneeRight:t.uniform(t.vec3(0,0,0)),ankleLeft:t.uniform(t.vec3(0,0,0)),ankleRight:t.uniform(t.vec3(0,0,0)),footLeft:t.uniform(t.vec3(0,0,0)),footRight:t.uniform(t.vec3(0,0,0)),hipLeft:t.uniform(t.vec3(0,0,0)),hip2Left:t.uniform(t.vec3(0,0,0)),hipRight:t.uniform(t.vec3(0,0,0)),hip2Right:t.uniform(t.vec3(0,0,0)),legLeft:t.uniform(t.vec3(0,0,0)),legRight:t.uniform(t.vec3(0,0,0)),elbowLeft:t.uniform(t.vec3(0,0,0)),elbowRight:t.uniform(t.vec3(0,0,0)),forearmLeft:t.uniform(t.vec3(0,0,0)),forearmRight:t.uniform(t.vec3(0,0,0)),wristLeft:t.uniform(t.vec3(0,0,0)),wristRight:t.uniform(t.vec3(0,0,0)),armLeft:t.uniform(t.vec3(0,0,0)),armRight:t.uniform(t.vec3(0,0,0))}};
