/*! disfigure v0.0.5 */
"use strict";var e=require("three/tsl"),t=require("three"),a=require("three/addons/libs/lil-gui.module.min.js"),o=require("three/addons/controls/OrbitControls.js");function n(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var s=n(t),i=n(a);const r=e.Fn((([t])=>{var a=t.cos().toVar(),o=t.sin().toVar();return e.mat3(1,0,0,0,a,o,0,o.negate(),a)})).setLayout({name:"matRotX",type:"mat3",inputs:[{name:"angle",type:"float"}]}),m=e.Fn((([t])=>{var a=t.cos().toVar(),o=t.sin().toVar();return e.mat3(a,0,o.negate(),0,1,0,o,0,a)})).setLayout({name:"matRotY",type:"mat3",inputs:[{name:"angle",type:"float"}]}),l=e.Fn((([t])=>{var a=t.cos().toVar(),o=t.sin().toVar();return e.mat3(a,o,0,o.negate(),a,0,0,0,1)})).setLayout({name:"matRotZ",type:"mat3",inputs:[{name:"angle",type:"float"}]}),u=e.Fn((([e])=>{var t=r(e.x),a=m(e.y),o=l(e.z);return a.mul(t).mul(o)})).setLayout({name:"matRotYXZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),p=e.Fn((([e])=>{var t=r(e.x),a=m(e.y),o=l(e.z);return a.mul(o).mul(t)})).setLayout({name:"matRotYZX",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),d=e.Fn((([e])=>{var t=r(e.x),a=m(e.y),o=l(e.z);return t.mul(a).mul(o)})).setLayout({name:"matRotXYZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),h=e.Fn((([e])=>{var t=r(e.x),a=m(e.y),o=l(e.z);return t.mul(o).mul(a)})).setLayout({name:"matRotXZY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),c=e.Fn((([e])=>{var t=r(e.x),a=m(e.y);return l(e.z).mul(t).mul(a)})).setLayout({name:"matRotZXY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),f=e.Fn((([e])=>{var t=r(e.x),a=m(e.y);return l(e.z).mul(a).mul(t)})).setLayout({name:"matRotZYX",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});var g=new s.Scene;g.background=new s.Color("whitesmoke");var v=new s.PerspectiveCamera(30,innerWidth/innerHeight);v.position.set(-2,1,3.5),v.lookAt(g.position);var y=new s.WebGPURenderer({antialias:!0});y.outputColorSpace=s.LinearSRGBColorSpace,y.setSize(innerWidth,innerHeight),document.body.appendChild(y.domElement),window.addEventListener("resize",(()=>{v.aspect=innerWidth/innerHeight,v.updateProjectionMatrix(),y.setSize(innerWidth,innerHeight)}));var L=new o.OrbitControls(v,y.domElement);L.enableDamping=!0,L.dampingFactor=.05;var R=new s.AmbientLight("white",1);g.add(R);var x=new s.DirectionalLight("white",2);x.position.set(0,0,1),g.add(x);var w,b=new s.AxesHelper,k={animate:!1},M={isolated:!1,randomize:function(e=s.MathUtils.randInt(Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)){function t(e=-1,t=1){return s.MathUtils.seededRandom()*(t-e)+e}s.MathUtils.seededRandom(e),S.rotation.y+=t()-.2,P.waist.value.set(t()/4-.2,t()/2,t()/2.5),P.chest.value.set(t()/3,0,t()/3),P.head.value.set(t()/2,t()/2,t()/3),P.kneeLeft.value.set(-(t()+1)/1.5,0,0),P.kneeRight.value.set(-(t()+1)/1.5,0,0),P.footLeft.value.set(.5*t()+.15,0,0),P.footRight.value.set(.5*t()+.15,0,0),P.ankleLeft.value.set(t()/2,0,t()/4),P.ankleRight.value.set(t()/2,0,t()/4),P.legLeft.value.set(0,t()-.25,0),P.legRight.value.set(0,t()+.25,0),P.hipLeft.value.set(t()/1+.25,0,-(t()+1)/4),P.hip2Left.value.set(0,t(),0),P.hipRight.value.set(t()/1+.25,0,(t()+1)/4),P.hip2Right.value.set(0,t(),0),P.elbowLeft.value.set(0,t()+1,0),P.elbowRight.value.set(0,-(t()+1),0),P.forearmLeft.value.set(.5*(1.5*t()+1),0,0),P.forearmRight.value.set(.5*(1.5*t()+1),0,0),P.wristLeft.value.set(0,.5*t()+.1,.7*t()),P.wristRight.value.set(0,.5*t()+.1,-.7*t()),P.armLeft.value.set(.7*(t()/1.5-.15),0,.7*t()),P.armRight.value.set(.7*(t()/1.5-.15),0,.7*t()),F()}},P={},G={},S=new s.Group;function z(e){switch(S.add(b),e){case 1:b.position.copy(G.headPos);break;case 2:b.position.copy(G.chestPos);break;case 3:b.position.copy(G.waistPos);break;case 11:b.position.copy(G.hipLeftPos);break;case 15:b.position.copy(G.hip2LeftPos);break;case 12:b.position.copy(G.legLeftPos);break;case 13:b.position.copy(G.kneeLeftPos);break;case 14:b.position.copy(G.ankleLeftPos);break;case 16:b.position.copy(G.footLeftPos);break;case 21:b.position.copy(G.armLeftPos);break;case 22:b.position.copy(G.elbowLeftPos);break;case 23:b.position.copy(G.forearmLeftPos);break;case 24:b.position.copy(G.wristLeftPos);break;default:S.remove(b)}}function F(){for(var e of w.controllersRecursive())e.updateDisplay()}function N({waistSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function I({headSpan:t}){return e.positionGeometry.y.add(e.positionGeometry.z.div(3)).smoothstep(t.x,t.y)}function E({chestSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function B({kneeLeftSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function T({kneeRightSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function V({ankleLeftSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function q({ankleRightSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function A({footLeftSpan:t,ankleLeftSpan:a}){return e.positionGeometry.z.smoothstep(t.x,t.y).mul(e.positionGeometry.y.step(a.y))}function j({footRightSpan:t,ankleRightSpan:a}){return e.positionGeometry.z.smoothstep(t.x,t.y).mul(e.positionGeometry.y.step(a.y))}function X({legLeftSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y).pow(1)}function Y({legRightSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function Z({hipLeftSpan:t}){var a=e.positionGeometry.x,o=e.positionGeometry.y;return o.sub(a.mul(2)).smoothstep(t.z,e.float(t.w).sub(a.mul(1.6))).mul(o.smoothstep(t.x,t.y)).mul(a.smoothstep(-.01,.01))}function C({hip2LeftSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function H({hipRightSpan:t}){var a=e.positionGeometry.x,o=e.positionGeometry.y;return o.add(a.mul(2)).smoothstep(t.z,e.float(t.w).add(a.mul(1.6))).mul(o.smoothstep(t.x,t.y)).mul(a.smoothstep(.01,-.01))}function O({hip2RightSpan:t}){return e.positionGeometry.y.smoothstep(t.x,t.y)}function W({elbowLeftSpan:t}){return e.positionGeometry.x.smoothstep(t.x,t.y)}function U({elbowRightSpan:t}){return e.positionGeometry.x.smoothstep(t.x,t.y)}function D({forearmLeftSpan:t}){return e.positionGeometry.x.smoothstep(t.x,t.y)}function _({forearmRightSpan:t}){return e.positionGeometry.x.smoothstep(t.x,t.y)}function K({wristLeftSpan:t}){return e.positionGeometry.x.smoothstep(t.x,t.y)}function $({wristRightSpan:t}){return e.positionGeometry.x.smoothstep(t.x,t.y)}function J({armLeftSpan:t}){var a=e.positionGeometry.x,o=e.positionGeometry.y;return a.smoothstep(t.x,t.y).mul(o.smoothstep(t.z,t.w))}function Q({armRightSpan:t}){var a=e.positionGeometry.x,o=e.positionGeometry.y;return a.smoothstep(t.x,t.y).mul(o.smoothstep(t.z,t.w))}y.setAnimationLoop((function(e){var t;k.animate&&(t=e/1e3,P.waist.value.set(Math.sin(t)/4-.2,Math.cos(1.2*t)/2,Math.sin(3*t)/2.5),P.chest.value.set(Math.cos(3*t)/3,0,Math.cos(3*t*1.5)/3),P.head.value.set(Math.cos(3*t)/2,Math.sin(1.2*t*2)/2,Math.cos(3*t*1.5)/3),P.kneeLeft.value.set(-(Math.cos(3*t)+1)/1.5,0,0),P.kneeRight.value.set(-(Math.sin(2.4*t)+1)/1.5,0,0),P.footLeft.value.set(.5*Math.cos(1.7*t)+.15,0,0),P.footRight.value.set(.5*Math.sin(1.9*t)+.15,0,0),P.ankleLeft.value.set(Math.cos(3*t)/2,0*Math.cos(2.8*t)/2,Math.cos(2.2*t)/4),P.ankleRight.value.set(Math.sin(3.2*t)/2,0*Math.cos(2.3*t)/2,Math.sin(2.1*t)/4),P.legLeft.value.set(0,Math.cos(2.8*t)-.25,0),P.legRight.value.set(0,Math.cos(2.3*t)+.25,0),P.hipLeft.value.set(Math.cos(3*t)/1+.25,0,-(Math.cos(2.2*t)+1)/4),P.hip2Left.value.set(0,Math.cos(2.8*t),0),P.hipRight.value.set(Math.sin(2.2*t)/1+.25,0,(Math.sin(2.6*t)+1)/4),P.hip2Right.value.set(0,Math.sin(3.2*t),0),P.elbowLeft.value.set(0,Math.cos(2*t-1)+1,0),P.elbowRight.value.set(0,-(Math.sin(1.8*t)+1),0),P.forearmLeft.value.set(.5*(1.5*Math.cos(3.6*t-1)+1),0,0),P.forearmRight.value.set(.5*(1.5*Math.sin(1.8*t*3+1)+1),0,0),P.wristLeft.value.set(0,.5*Math.cos(3.6*t-1)+.1,.7*Math.cos(2.6*t+1)),P.wristRight.value.set(0,.5*Math.cos(3.6*t-1)+.1,-.7*Math.cos(2.6*t+1)),P.armLeft.value.set(.7*(Math.cos(3*t)/1.5-.15),0,.7*Math.cos(2.2*t)),P.armRight.value.set(.7*(Math.sin(2.4*t)/1.5-.15),0,.7*Math.sin(2.7*t)),F()),L.update(),x.position.copy(v.position),y.render(g,v)}));var ee=e.Fn((([e,t,a,o])=>e.sub(t).mul(u(a.mul(o))).add(t))).setLayout({name:"jointRotate",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),te=e.Fn((([e,t,a])=>e.mul(u(t.mul(a))))).setLayout({name:"jointRotateNormal",type:"vec3",inputs:[{name:"nor",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),ae=e.Fn((([e,t,a,o])=>e.sub(t).mul(p(a.mul(o))).add(t))).setLayout({name:"jointRotateLeg",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),oe=e.Fn((([e,t,a])=>e.mul(p(t.mul(a))))).setLayout({name:"jointRotateNormalLeg",type:"vec3",inputs:[{name:"nor",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),ne=e.Fn((([t,a,o,n])=>e.mix(t,t.sub(a).mul(h(o.mul(n))).mul(e.float(1).sub(n.mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).div(4).mul(o.z.cos().oneMinus()))).add(a),n.pow(.25)))).setLayout({name:"jointRotate2",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),se=e.Fn((([t,a,o])=>e.mix(t,t.mul(h(a.mul(o))).mul(e.float(1).sub(o.mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).div(4).mul(a.z.cos().oneMinus()))),o.pow(.25)))).setLayout({name:"jointRotateNormal2",type:"vec3",inputs:[{name:"nor",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),ie=e.Fn((({skeleton:t,posture:a})=>{var o=e.positionGeometry.toVar(),n=J(t).toVar();e.If(n.greaterThan(0),(()=>{o.assign(ee(o,t.wristLeftPos,a.wristLeft,K(t))),o.assign(ee(o,t.forearmLeftPos,a.forearmLeft,D(t))),o.assign(ee(o,t.elbowLeftPos,a.elbowLeft,W(t))),o.assign(ne(o,t.armLeftPos,a.armLeft,n))}));var s=Q(t).toVar();e.If(s.greaterThan(0),(()=>{o.assign(ee(o,t.wristRightPos,a.wristRight,$(t))),o.assign(ee(o,t.forearmRightPos,a.forearmRight,_(t))),o.assign(ee(o,t.elbowRightPos,a.elbowRight,U(t))),o.assign(ne(o,t.armRightPos,a.armRight,s))})),o.assign(ee(o,t.headPos,a.head,I(t))),o.assign(ee(o,t.chestPos,a.chest,E(t))),o.assign(ee(o,t.waistPos,a.waist,N(t)));var i=Z(t).toVar();e.If(i.greaterThan(0),(()=>{o.assign(ee(o,t.footLeftPos,a.footLeft,A(t))),o.assign(ee(o,t.ankleLeftPos,a.ankleLeft,V(t))),o.assign(ee(o,t.legLeftPos,a.legLeft,X(t))),o.assign(ee(o,t.kneeLeftPos,a.kneeLeft,B(t))),o.assign(ae(o,t.hip2LeftPos,a.hip2Left,C(t))),o.assign(ae(o,t.hipLeftPos,a.hipLeft,i))}));var r=H(t).toVar();return e.If(r.greaterThan(0),(()=>{o.assign(ee(o,t.footRightPos,a.footRight,j(t))),o.assign(ee(o,t.ankleRightPos,a.ankleRight,q(t))),o.assign(ee(o,t.legRightPos,a.legRight,Y(t))),o.assign(ee(o,t.kneeRightPos,a.kneeRight,T(t))),o.assign(ae(o,t.hip2RightPos,a.hip2Right,O(t))),o.assign(ae(o,t.hipRightPos,a.hipRight,r))})),o})),re=e.Fn((({skeleton:t,posture:a})=>{var o=e.normalGeometry.toVar(),n=J(t).toVar();e.If(n.greaterThan(0),(()=>{o.assign(te(o,a.wristLeft,K(t))),o.assign(te(o,a.forearmLeft,D(t))),o.assign(te(o,a.elbowLeft,W(t))),o.assign(se(o,a.armLeft,n))}));var s=Q(t).toVar();e.If(s.greaterThan(0),(()=>{o.assign(te(o,a.wristRight,$(t))),o.assign(te(o,a.forearmRight,_(t))),o.assign(te(o,a.elbowRight,U(t))),o.assign(se(o,a.armRight,s))})),o.assign(te(o,a.head,I(t))),o.assign(te(o,a.chest,E(t))),o.assign(te(o,a.waist,N(t)));var i=Z(t).toVar();e.If(i.greaterThan(0),(()=>{o.assign(te(o,a.footLeft,A(t))),o.assign(te(o,a.ankleLeft,V(t))),o.assign(te(o,a.legLeft,X(t))),o.assign(te(o,a.kneeLeft,B(t))),o.assign(oe(o,a.hip2Left,C(t))),o.assign(oe(o,a.hipLeft,i))}));var r=H(t).toVar();return e.If(r.greaterThan(0),(()=>{o.assign(te(o,a.footRight,j(t))),o.assign(te(o,a.ankleRight,q(t))),o.assign(te(o,a.legRight,Y(t))),o.assign(te(o,a.kneeRight,T(t))),o.assign(oe(o,a.hip2Right,O(t))),o.assign(oe(o,a.hipRight,r))})),e.transformNormalToView(o).normalize()})),me=e.Fn((({skeleton:t,posture:a})=>{var o=a.select,n=e.float(0).add(I(t).mul(e.select(o.equal(1),1,0))).add(E(t).mul(e.select(o.equal(2),1,0))).add(N(t).mul(e.select(o.equal(3),1,0))).add(Z(t).mul(e.select(o.equal(11),1,0))).add(X(t).mul(e.select(o.equal(12),1,0))).add(B(t).mul(e.select(o.equal(13),1,0))).add(V(t).mul(e.select(o.equal(14),1,0))).add(A(t).mul(e.select(o.equal(16),1,0))).add(C(t).mul(e.select(o.equal(15),1,0))).add(J(t).mul(e.select(o.equal(21),1,0))).add(W(t).mul(e.select(o.equal(22),1,0))).add(D(t).mul(e.select(o.equal(23),1,0))).add(K(t).mul(e.select(o.equal(24),1,0))).toVar();return n.assign(e.select(a.isolated,n.smoothstep(0,1).mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).pow(1/4).mul(1.1).negate(),n.clamp(0,1).pow(.75).negate())),e.vec3(0,n.div(2),n.div(1))})),le=e.Fn((()=>{var t=e.positionGeometry,a=e.float(0).add(t.x.mul(72).cos().smoothstep(.9,1)).add(t.y.mul(74).cos().smoothstep(.9,1)).add(t.z.mul(74).add(t.y.mul(4.5).add(.5).cos().mul(1).add(2.5)).abs().smoothstep(.6,0)).smoothstep(.6,1).oneMinus().pow(.1);return e.vec3(a)}));exports.createGui=function(t,a,o){G=t,(P=a).select=e.uniform(0,"int"),P.isolated=e.uniform(0,"int"),S=o,(w=new i.GUI).domElement.style.marginRight=0;var n=w.addFolder("DEBUG");function s(e,t,a=""){return`<div class="padded ${a}">${e} &nbsp; <span class="icon">${t}</span></div>`}return n.close(),n.add(P.select,"value",{Nothing:0,Head:1,Chest:2,Waist:3,Hip:11,Hip2:15,Leg:12,Knee:13,Ankle:14,Foot:16,Arm:21,Elbow:22,Forearm:23,Wrist:24}).name("Show").onChange(z),n.add(M,"isolated",!1).name("Isolated").onChange((()=>{P.isolated.value=M.isolated?1:0})),n.add(k,"animate",!1).name("Animate"),n.add(M,"randomize").name("Randomize"),(n=w.addFolder("TORSO")).add(P.head.value,"x",-.7,.5).name(s("Head","&#x2195;")),n.add(P.head.value,"z",-.5,.5).name(s("","&#x21B6;")),n.add(P.head.value,"y",-1,1).name(s("","&#x2194;")),n.add(P.chest.value,"x",-.7,.4).name(s("Chest","&#x2195;","border")),n.add(P.chest.value,"z",-.5,.5).name(s("","&#x21B6;")),n.add(P.waist.value,"x",-1,.6).name(s("Waist","&#x2195;","border")),n.add(P.waist.value,"z",-.5,.5).name(s("","&#x21B6;")),n.add(P.waist.value,"y",-1,1).name(s("","&#x2194;")),(n=w.addFolder("LEFT LEG").close()).add(P.hipLeft.value,"x",-.6,2.7).name(s("Leg","&#x2195;")),n.add(P.hipLeft.value,"z",-2.4,.2).name(s("","&#x21BA;")),n.add(P.hip2Left.value,"y",-1.4,1.4).name(s("","&#x2194;")),n.add(P.kneeLeft.value,"x",-2.6,0).name(s("Knee","&#x2195;","border")),n.add(P.ankleLeft.value,"x",-1,.7).name(s("Ankle","&#x2195;","border")),n.add(P.legLeft.value,"y",-3,3).name(s("","&#x2194;")),n.add(P.ankleLeft.value,"z",-.5,.5).name(s("","&#x21BA;")),n.add(P.footLeft.value,"x",-.3,.6).name(s("Foot","&#x2195;","border")),(n=w.addFolder("RIGHT LEG").close()).add(P.hipRight.value,"x",-.6,2.7).name(s("Leg","&#x2195;")),n.add(P.hipRight.value,"z",-.2,2.4).name(s("","&#x21BB;")),n.add(P.hip2Right.value,"y",-1.4,1.4).name(s("","&#x2194;")),n.add(P.kneeRight.value,"x",-2.6,0).name(s("Knee","&#x2195;","border")),n.add(P.ankleRight.value,"x",-1,.7).name(s("Ankle","&#x2195;","border")),n.add(P.legRight.value,"y",-3,3).name(s("","&#x2194;")),n.add(P.ankleRight.value,"z",-.5,.5).name(s("","&#x21BB;")),n.add(P.footRight.value,"x",-.3,.6).name(s("Foot","&#x2195;","border")),(n=w.addFolder("LEFT ARM").close()).add(P.armLeft.value,"z",-1.5,1.7).name(s("Arm","&#x2195;")),n.add(P.armLeft.value,"y",-.5,2).name(s("","&#x2194;")),n.add(P.armLeft.value,"x",-.5,.5).name(s("","&#x21BB;")),n.add(P.elbowLeft.value,"y",0,2.7).name(s("Elbow","&#x2195;","border")),n.add(P.wristLeft.value,"z",-1.4,1.4).name(s("Wrist","&#x2195;","border")),n.add(P.wristLeft.value,"y",-.6,.4).name(s("","&#x2194;")),n.add(P.forearmLeft.value,"x",-1.5,3).name(s("","&#x21BB;")),(n=w.addFolder("RIGHT ARM").close()).add(P.armRight.value,"z",-1.5,1.7).name(s("Arm","&#x2195;")),n.add(P.armRight.value,"y",-2,.5).name(s("","&#x2194;")),n.add(P.armRight.value,"x",-.5,.5).name(s("","&#x21BB;")),n.add(P.elbowRight.value,"y",-2.7,0).name(s("Elbow","&#x2195;","border")),n.add(P.wristRight.value,"z",-1.4,1.4).name(s("Wrist","&#x2195;","border")),n.add(P.wristRight.value,"y",-.4,.6).name(s("","&#x2194;")),n.add(P.forearmRight.value,"x",-1.5,3).name(s("","&#x21BB;")),w},exports.credits=function(e,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById(t).innerHTML=this.responseText.split("||")[0])},(e=e.split(".")).pop(),e.push("txt"),e=e.join("."),a.open("GET",e,!0),a.send()},exports.matRotXYZ=d,exports.matRotXZY=h,exports.matRotYXZ=u,exports.matRotYZX=p,exports.matRotZXY=c,exports.matRotZYX=f,exports.processModel=function(e,a,o,n){return function(e){var a=[];e.traverse((e=>{if(e.isMesh){var o=e.geometry.clone().applyMatrix4(e.matrixWorld),n=e.material.clone();a.push(new t.Mesh(o,n))}})),e.clear(),e.position.set(0,0,0),e.rotation.set(0,0,0,"XYZ"),e.scale.set(1,1,1),e.add(...a)}(e),function(e,a,o,n){e.traverse((e=>{if(e.isMesh){var s=new t.MeshPhysicalNodeMaterial;Object.assign(s,e.material),s.metalness=.1,s.roughness=.6,n.colorNode&&(s.colorNode=n.colorNode()),n.positionNode&&(s.positionNode=n.positionNode({skeleton:a,posture:o})),n.normalNode&&(s.normalNode=n.normalNode({skeleton:a,posture:o})),n.emissiveNode&&(s.emissiveNode=n.emissiveNode({skeleton:a,posture:o})),e.material=s}}))}(e,a,o,n),function(e){var a=new t.Vector3;(new t.Box3).setFromObject(e,!0).getCenter(a),e.position.sub(a)}(e),e},exports.scene=g,exports.tslColorNode=le,exports.tslEmissiveNode=me,exports.tslNormalNode=re,exports.tslPositionNode=ie,exports.tslPosture=function(){return{head:e.uniform(e.vec3(0,0,0)),chest:e.uniform(e.vec3(0,0,0)),waist:e.uniform(e.vec3(0,0,0)),kneeLeft:e.uniform(e.vec3(0,0,0)),kneeRight:e.uniform(e.vec3(0,0,0)),ankleLeft:e.uniform(e.vec3(0,0,0)),ankleRight:e.uniform(e.vec3(0,0,0)),footLeft:e.uniform(e.vec3(0,0,0)),footRight:e.uniform(e.vec3(0,0,0)),hipLeft:e.uniform(e.vec3(0,0,0)),hip2Left:e.uniform(e.vec3(0,0,0)),hipRight:e.uniform(e.vec3(0,0,0)),hip2Right:e.uniform(e.vec3(0,0,0)),legLeft:e.uniform(e.vec3(0,0,0)),legRight:e.uniform(e.vec3(0,0,0)),elbowLeft:e.uniform(e.vec3(0,0,0)),elbowRight:e.uniform(e.vec3(0,0,0)),forearmLeft:e.uniform(e.vec3(0,0,0)),forearmRight:e.uniform(e.vec3(0,0,0)),wristLeft:e.uniform(e.vec3(0,0,0)),wristRight:e.uniform(e.vec3(0,0,0)),armLeft:e.uniform(e.vec3(0,0,0)),armRight:e.uniform(e.vec3(0,0,0))}};
