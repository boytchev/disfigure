/*! disfigure v0.0.3 */
"use strict";var t=require("three/tsl");require("three");const e=t.Fn((([e])=>{var n=e.cos().toVar(),o=e.sin().toVar();return t.mat3(1,0,0,0,n,o,0,o.negate(),n)})).setLayout({name:"matRotX",type:"mat3",inputs:[{name:"angle",type:"float"}]}),n=t.Fn((([e])=>{var n=e.cos().toVar(),o=e.sin().toVar();return t.mat3(n,0,o.negate(),0,1,0,o,0,n)})).setLayout({name:"matRotY",type:"mat3",inputs:[{name:"angle",type:"float"}]}),o=t.Fn((([e])=>{var n=e.cos().toVar(),o=e.sin().toVar();return t.mat3(n,o,0,o.negate(),n,0,0,0,1)})).setLayout({name:"matRotZ",type:"mat3",inputs:[{name:"angle",type:"float"}]}),s=t.Fn((([t])=>{var s=e(t.x),a=n(t.y),r=o(t.z);return a.mul(s).mul(r)})).setLayout({name:"matRotYXZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),a=t.Fn((([t])=>{var s=e(t.x),a=n(t.y),r=o(t.z);return a.mul(r).mul(s)})).setLayout({name:"matRotYZX",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});t.Fn((([t])=>{var s=e(t.x),a=n(t.y),r=o(t.z);return s.mul(a).mul(r)})).setLayout({name:"matRotXYZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});const r=t.Fn((([t])=>{var s=e(t.x),a=n(t.y),r=o(t.z);return s.mul(r).mul(a)})).setLayout({name:"matRotXZY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});function u({waistSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}function i({headSpan:e}){return t.positionGeometry.y.add(t.positionGeometry.z.div(3)).smoothstep(e.x,e.y)}function m({chestSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}function p({kneeLeftSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}function l({ankleLeftSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}function y({legLeftSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y).pow(1)}function h({hipLeftSpan:e}){var n=t.positionGeometry.x,o=t.positionGeometry.y;return o.sub(n.mul(2)).smoothstep(e.z,e.w.sub(n.mul(1.6))).mul(o.smoothstep(e.x,e.y)).mul(n.smoothstep(-.01,.01))}function f({elbowLeftSpan:e}){return t.positionGeometry.x.smoothstep(e.x,e.y)}function c({forearmLeftSpan:e}){return t.positionGeometry.x.smoothstep(e.x,e.y)}function g({wristLeftSpan:e}){return t.positionGeometry.x.smoothstep(e.x,e.y)}function v({armLeftSpan:e}){var n=t.positionGeometry.x,o=t.positionGeometry.y;return n.smoothstep(e.x,e.y).mul(o.smoothstep(e.z,e.w))}t.Fn((([t])=>{var s=e(t.x),a=n(t.y);return o(t.z).mul(s).mul(a)})).setLayout({name:"matRotZXY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),t.Fn((([t])=>{var s=e(t.x),a=n(t.y);return o(t.z).mul(a).mul(s)})).setLayout({name:"matRotZYX",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});var d=t.Fn((([t,e,n,o])=>t.sub(e).mul(s(n.mul(o))).add(e))).setLayout({name:"jointRotate",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),L=t.Fn((([t,e,n,o])=>t.sub(e).mul(a(n.mul(o))).add(e))).setLayout({name:"jointRotateLeg",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),R=t.Fn((([e,n,o,s])=>t.mix(e,e.sub(n).mul(r(o.mul(s))).mul(t.float(1).sub(s.mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).div(4).mul(o.z.cos().oneMinus()))).add(n),s.pow(.25)))).setLayout({name:"jointRotate2",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),T=t.Fn((({skeleton:e,posture:n})=>{var o=t.positionGeometry.toVar(),s=v(e).toVar();t.If(s.greaterThan(0),(()=>{o.assign(d(o,e.wristLeftPos,n.wristLeftTurn,g(e))),o.assign(d(o,e.forearmLeftPos,n.forearmLeftTurn,c(e))),o.assign(d(o,e.elbowLeftPos,n.elbowLeftTurn,f(e))),o.assign(R(o,e.armLeftPos,n.armLeftTurn,s))}));var a=function({armRightSpan:e}){var n=t.positionGeometry.x,o=t.positionGeometry.y;return n.smoothstep(e.x,e.y).mul(o.smoothstep(e.z,e.w))}(e).toVar();t.If(a.greaterThan(0),(()=>{o.assign(d(o,e.wristRightPos,n.wristRightTurn,function({wristRightSpan:e}){return t.positionGeometry.x.smoothstep(e.x,e.y)}(e))),o.assign(d(o,e.forearmRightPos,n.forearmRightTurn,function({forearmRightSpan:e}){return t.positionGeometry.x.smoothstep(e.x,e.y)}(e))),o.assign(d(o,e.elbowRightPos,n.elbowRightTurn,function({elbowRightSpan:e}){return t.positionGeometry.x.smoothstep(e.x,e.y)}(e))),o.assign(R(o,e.armRightPos,n.armRightTurn,a))})),o.assign(d(o,e.headPos,n.headTurn,i(e))),o.assign(d(o,e.chestPos,n.chestTurn,m(e))),o.assign(d(o,e.waistPos,n.waistTurn,u(e)));var r=h(e).toVar();t.If(r.greaterThan(0),(()=>{o.assign(d(o,e.ankleLeftPos,n.ankleLeftTurn,l(e))),o.assign(d(o,e.legLeftPos,n.legLeftTurn,y(e))),o.assign(d(o,e.kneeLeftPos,n.kneeLeftTurn,p(e))),o.assign(L(o,e.hip2LeftPos,n.hip2LeftTurn,function({hip2LeftSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}(e))),o.assign(L(o,e.hipLeftPos,n.hipLeftTurn,r))}));var T=function({hipRightSpan:e}){var n=t.positionGeometry.x,o=t.positionGeometry.y;return o.add(n.mul(2)).smoothstep(e.z,e.w.add(n.mul(1.6))).mul(o.smoothstep(e.x,e.y)).mul(n.smoothstep(.01,-.01))}(e).toVar();return t.If(T.greaterThan(0),(()=>{o.assign(d(o,e.ankleRightPos,n.ankleRightTurn,function({ankleRightSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}(e))),o.assign(d(o,e.legRightPos,n.legRightTurn,function({legRightSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}(e))),o.assign(d(o,e.kneeRightPos,n.kneeRightTurn,function({kneeRightSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}(e))),o.assign(L(o,e.hip2RightPos,n.hip2RightTurn,function({hip2RightSpan:e}){return t.positionGeometry.y.smoothstep(e.x,e.y)}(e))),o.assign(L(o,e.hipRightPos,n.hipRightTurn,T))})),o})),x=t.Fn((({skeleton:e,posture:n})=>{var o=n.select,s=t.float(0).add(i(e).mul(t.select(o.equal(1),1,0))).add(m(e).mul(t.select(o.equal(2),1,0))).add(u(e).mul(t.select(o.equal(3),1,0))).add(h(e).mul(t.select(o.equal(11),1,0))).add(y(e).mul(t.select(o.equal(12),1,0))).add(p(e).mul(t.select(o.equal(13),1,0))).add(l(e).mul(t.select(o.equal(14),1,0))).add(v(e).mul(t.select(o.equal(21),1,0))).add(f(e).mul(t.select(o.equal(22),1,0))).add(c(e).mul(t.select(o.equal(23),1,0))).add(g(e).mul(t.select(o.equal(24),1,0))).toVar();return s.assign(t.select(n.isolated.equal(0),s.smoothstep(0,1).mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).pow(1/4).mul(1.1).negate(),s.clamp(0,1).pow(.75).negate())),t.vec3(0,s.div(2),s.div(1))})),w=t.Fn((()=>{var e=t.positionGeometry,n=t.float(0).add(e.x.mul(72).cos().smoothstep(.9,1)).add(e.y.mul(74).cos().smoothstep(.9,1)).add(e.z.mul(74).add(e.y.mul(4.5).add(.5).cos().mul(1).add(2.5)).abs().smoothstep(.6,0)).smoothstep(.6,1).oneMinus().pow(.1);return t.vec3(n)}));exports.tslColorNode=w,exports.tslEmissiveNode=x,exports.tslPositionNode=T,exports.tslPosture=function(){return{headTurn:t.uniform(t.vec3(0,0,0)),chestTurn:t.uniform(t.vec3(0,0,0)),waistTurn:t.uniform(t.vec3(0,0,0)),kneeLeftTurn:t.uniform(t.vec3(0,0,0)),kneeRightTurn:t.uniform(t.vec3(0,0,0)),ankleLeftTurn:t.uniform(t.vec3(0,0,0)),ankleRightTurn:t.uniform(t.vec3(0,0,0)),hipLeftTurn:t.uniform(t.vec3(0,0,0)),hip2LeftTurn:t.uniform(t.vec3(0,0,0)),hipRightTurn:t.uniform(t.vec3(0,0,0)),hip2RightTurn:t.uniform(t.vec3(0,0,0)),legLeftTurn:t.uniform(t.vec3(0,0,0)),legRightTurn:t.uniform(t.vec3(0,0,0)),elbowLeftTurn:t.uniform(t.vec3(0,0,0)),elbowRightTurn:t.uniform(t.vec3(0,0,0)),forearmLeftTurn:t.uniform(t.vec3(0,0,0)),forearmRightTurn:t.uniform(t.vec3(0,0,0)),wristLeftTurn:t.uniform(t.vec3(0,0,0)),wristRightTurn:t.uniform(t.vec3(0,0,0)),armLeftTurn:t.uniform(t.vec3(0,0,0)),armRightTurn:t.uniform(t.vec3(0,0,0))}};
