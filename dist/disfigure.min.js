/*! disfigure v0.0.1 */
import{Fn as t,mat3 as e,mix as a,float as n,positionGeometry as s,If as o,select as r,vec3 as u}from"three/tsl";import"three";const m=t((([t])=>{var a=t.cos().toVar(),n=t.sin().toVar();return e(1,0,0,0,a,n,0,n.negate(),a)})).setLayout({name:"matRotX",type:"mat3",inputs:[{name:"angle",type:"float"}]}),i=t((([t])=>{var a=t.cos().toVar(),n=t.sin().toVar();return e(a,0,n.negate(),0,1,0,n,0,a)})).setLayout({name:"matRotY",type:"mat3",inputs:[{name:"angle",type:"float"}]}),p=t((([t])=>{var a=t.cos().toVar(),n=t.sin().toVar();return e(a,n,0,n.negate(),a,0,0,0,1)})).setLayout({name:"matRotZ",type:"mat3",inputs:[{name:"angle",type:"float"}]}),l=t((([t])=>{var e=m(t.x),a=i(t.y),n=p(t.z);return a.mul(e).mul(n)})).setLayout({name:"matRotYXZ",type:"mat3",inputs:[{name:"angles",type:"vec3"}]}),h=t((([t])=>{var e=m(t.x),a=i(t.y),n=p(t.z);return e.mul(n).mul(a)})).setLayout({name:"matRotXZY",type:"mat3",inputs:[{name:"angles",type:"vec3"}]});function g({waistSpan:t}){return s.y.smoothstep(t.x,t.y)}function y({headSpan:t}){return s.y.add(s.z.div(3)).smoothstep(t.x,t.y)}function d({chestSpan:t}){return s.y.smoothstep(t.x,t.y)}function f({kneeLeftSpan:t}){return s.y.smoothstep(t.x,t.y)}function c({ankleLeftSpan:t}){return s.y.smoothstep(t.x,t.y)}function x({legLeftSpan:t}){return s.y.smoothstep(t.x,t.y)}function v({hipLeftSpan:t}){var e=s.x,a=s.y;return a.sub(e.mul(2)).smoothstep(t.z,t.w.sub(e.mul(1.6))).mul(a.smoothstep(t.x,t.y)).mul(e.smoothstep(-.01,.01))}function L({elbowLeftSpan:t}){return s.x.smoothstep(t.x,t.y)}function R({forearmLeftSpan:t}){return s.x.smoothstep(t.x,t.y)}function w({wristLeftSpan:t}){return s.x.smoothstep(t.x,t.y)}function P({armLeftSpan:t}){var e=s.x,a=s.y;return e.smoothstep(t.x,t.y).mul(a.smoothstep(t.z,t.w))}var T=t((([t,e,a,n])=>t.sub(e).mul(l(a.mul(n))).add(e))).setLayout({name:"jointRotate",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),S=t((([t,e,s,o])=>a(t,t.sub(e).mul(h(s.mul(o))).mul(n(1).sub(o.mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).div(4).mul(s.z.cos().oneMinus()))).add(e),o.pow(.25)))).setLayout({name:"jointRotate2",type:"vec3",inputs:[{name:"pos",type:"vec3"},{name:"center",type:"vec3"},{name:"angle",type:"vec3"},{name:"amount",type:"float"}]}),b=t((t=>{var e=s.toVar(),a=P(t).toVar();o(a.greaterThan(0),(()=>{e.assign(T(e,t.wristLeftPos,t.wristLeftTurn,w(t))),e.assign(T(e,t.forearmLeftPos,t.forearmLeftTurn,R(t))),e.assign(T(e,t.elbowLeftPos,t.elbowLeftTurn,L(t))),e.assign(S(e,t.armLeftPos,t.armLeftTurn,a))}));var n=function({armRightSpan:t}){var e=s.x,a=s.y;return e.smoothstep(t.x,t.y).mul(a.smoothstep(t.z,t.w))}(t).toVar();o(n.greaterThan(0),(()=>{e.assign(T(e,t.wristRightPos,t.wristRightTurn,function({wristRightSpan:t}){return s.x.smoothstep(t.x,t.y)}(t))),e.assign(T(e,t.forearmRightPos,t.forearmRightTurn,function({forearmRightSpan:t}){return s.x.smoothstep(t.x,t.y)}(t))),e.assign(T(e,t.elbowRightPos,t.elbowRightTurn,function({elbowRightSpan:t}){return s.x.smoothstep(t.x,t.y)}(t))),e.assign(S(e,t.armRightPos,t.armRightTurn,n))})),e.assign(T(e,t.headPos,t.headTurn,y(t))),e.assign(T(e,t.chestPos,t.chestTurn,d(t))),e.assign(T(e,t.waistPos,t.waistTurn,g(t)));var r=v(t).toVar();o(r.greaterThan(0),(()=>{e.assign(T(e,t.ankleLeftPos,t.ankleLeftTurn,c(t))),e.assign(T(e,t.legLeftPos,t.legLeftTurn,x(t))),e.assign(T(e,t.kneeLeftPos,t.kneeLeftTurn,f(t))),e.assign(T(e,t.hipLeftPos,t.hipLeftTurn,r))}));var u=function({hipRightSpan:t}){var e=s.x,a=s.y;return a.add(e.mul(2)).smoothstep(t.z,t.w.add(e.mul(1.6))).mul(a.smoothstep(t.x,t.y)).mul(e.smoothstep(.01,-.01))}(t).toVar();return o(u.greaterThan(0),(()=>{e.assign(T(e,t.ankleRightPos,t.ankleRightTurn,function({ankleRightSpan:t}){return s.y.smoothstep(t.x,t.y)}(t))),e.assign(T(e,t.legRightPos,t.legRightTurn,function({legRightSpan:t}){return s.y.smoothstep(t.x,t.y)}(t))),e.assign(T(e,t.kneeRightPos,t.kneeRightTurn,function({kneeRightSpan:t}){return s.y.smoothstep(t.x,t.y)}(t))),e.assign(T(e,t.hipRightPos,t.hipRightTurn,u))})),e})),k=t((t=>{var e=t.select,a=n(0).add(y(t).mul(r(e.equal(1),1,0))).add(d(t).mul(r(e.equal(2),1,0))).add(g(t).mul(r(e.equal(3),1,0))).add(v(t).mul(r(e.equal(11),1,0))).add(x(t).mul(r(e.equal(12),1,0))).add(f(t).mul(r(e.equal(13),1,0))).add(c(t).mul(r(e.equal(14),1,0))).add(P(t).mul(r(e.equal(21),1,0))).add(L(t).mul(r(e.equal(22),1,0))).add(R(t).mul(r(e.equal(23),1,0))).add(w(t).mul(r(e.equal(24),1,0))).toVar();return a.assign(r(t.isolated.equal(0),a.smoothstep(0,1).mul(2*Math.PI).sub(Math.PI).cos().add(1).div(2).pow(1/4).mul(1.1).negate(),a.clamp(0,1).pow(.75).negate())),u(0,a.div(2),a.div(1))})),q=t((()=>{var t=s,e=n(0).add(t.x.mul(72).cos().smoothstep(.9,1)).add(t.y.mul(74).cos().smoothstep(.9,1)).add(t.z.mul(74).add(t.y.mul(4.5).add(.5).cos().mul(1).add(2.5)).abs().smoothstep(.6,0)).smoothstep(.6,1).oneMinus().pow(.1);return u(e)}));export{q as tslColorNode,k as tslEmissiveNode,b as tslPositionNode};
