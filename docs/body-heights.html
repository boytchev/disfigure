<!DOCTYPE html>

<html>

<body>
	<header>
		<h1><b>Disfigure</b></h1>
		<h3>Custom heights for bodies</h3></br>
	</header>

	<div id="spinner"></div>

	<script src="importmap.js"></script>
	<script type="module">

import * as Happy from 'disfigure';
import * as Red from 'label';

new Happy.World();

Happy.camera.position.set( 6, 1.5, 0 );
Happy.controls.autoRotate = true;
Happy.controls.autoRotateSpeed = 0.5;

for ( var i=0; i<10; i++ ) {

	var man = new Happy.Man( 1 + Math.random() );

	var a = i/10 * 2*Math.PI;

	man.position.set( 1.5*Math.cos( a ), 0, 1.5*Math.sin( a ) );
	man.rotation.y = -Math.PI/2-a;

	var label = new Red.Label( man.height.toFixed( 2 ), 1 );
	label.position.set( 0, 0.3, 0 );

	man.head.attach( label );

}

Happy.setAnimationLoop( ( t )=>{

	for ( var body of Happy.everybody ) {

		body.head.turn = Happy.chaotic( t/4000, body.uid, -40, 40 );
		body.head.bend = Happy.chaotic( t/4000, -body.uid, 0, 100*body.height-160 );
		body.waist.turn = body.head.turn;

	}

} );
	</script>
</body>
</html>